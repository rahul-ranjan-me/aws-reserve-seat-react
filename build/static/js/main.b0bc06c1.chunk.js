(this["webpackJsonpaws-reserve-seat-react"]=this["webpackJsonpaws-reserve-seat-react"]||[]).push([[0],{22:function(e,t,a){},34:function(e,t,a){},47:function(e,t,a){e.exports=a(68)},52:function(e,t,a){},65:function(e,t,a){},66:function(e,t,a){},67:function(e,t,a){},68:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),l=a(16),r=a.n(l);a(52),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var o=a(11),i=a(13),c=a(10),u=a(14),m=a.n(u),d=Object(c.b)({availableSeats:function(){return[{id:1,seatNumber:"361",floor:"4F",isWebcam:!0,isHeadphone:!0,type:"room"},{id:2,seatNumber:"362",floor:"4F",isWebcam:!1,isHeadphone:!0,type:"room"},{id:3,seatNumber:"363",floor:"4F",isWebcam:!1,isHeadphone:!1,type:"room"},{id:4,seatNumber:"364",floor:"4F",isWebcam:!0,isHeadphone:!1,type:"room"},{id:5,seatNumber:"365",floor:"4F",isWebcam:!0,isHeadphone:!0,type:"room"},{id:6,seatNumber:"366",floor:"4F",isWebcam:!1,isHeadphone:!0,type:"room"},{id:7,seatNumber:"367",floor:"4F",isWebcam:!0,isHeadphone:!1,type:"room"},{id:8,seatNumber:"368",floor:"4F",isWebcam:!0,isHeadphone:!0,type:"room"},{id:9,seatNumber:"369",floor:"4F",isWebcam:!1,isHeadphone:!0,type:"room"},{id:10,seatNumber:"370",floor:"4F",isWebcam:!1,isHeadphone:!1,type:"room"},{id:11,seatNumber:"371",floor:"4F",isWebcam:!0,isHeadphone:!1,type:"room"},{id:12,seatNumber:"372",floor:"4F",isWebcam:!0,isHeadphone:!0,type:"room"},{id:13,seatNumber:"373",floor:"4F",isWebcam:!1,isHeadphone:!0,type:"room"},{id:14,seatNumber:"374",floor:"4F",isWebcam:!0,isHeadphone:!1,type:"room"},{id:15,seatNumber:"375",floor:"4F",isWebcam:!0,isHeadphone:!0,type:"room"},{id:16,seatNumber:"376",floor:"4F",isWebcam:!1,isHeadphone:!0,type:"room"},{id:17,seatNumber:"377",floor:"4F",isWebcam:!1,isHeadphone:!1,type:"room"},{id:18,seatNumber:"378",floor:"4F",isWebcam:!0,isHeadphone:!1,type:"room"},{id:19,seatNumber:"379",floor:"4F",isWebcam:!0,isHeadphone:!0,type:"room"},{id:20,seatNumber:"380",floor:"4F",isWebcam:!1,isHeadphone:!0,type:"room"},{id:21,seatNumber:"381",floor:"4F",isWebcam:!0,isHeadphone:!1,type:"room"}]},chosenSeats:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEAT_SELECTED":var a=m.a.cloneDeep(e);return a.length&&-1!==m.a.findIndex(a,{_id:t.payload._id})?a.splice(m.a.findIndex(a,{_id:t.payload._id}),1):a.push(t.payload),a;case"SEAT_REMOVED":var n=m.a.cloneDeep(e);return n.length&&-1!==m.a.findIndex(n,{_id:t.payload._id})&&n.splice(m.a.findIndex(n,{_id:t.payload._id}),1),n;case"SEATS_REMOVED":return[]}return e},inventories:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INVENTORY_GET":case"INVENTORY_POST":return t.payload;case"INVENTORY_PUT":var a=m.a.cloneDeep(e),n=m.a.findIndex(a,{_id:t.payload._id});return-1!==n&&(a[n]=t.payload),a;case"INVENTORY_DELETE":var s=m.a.cloneDeep(e),l=m.a.findIndex(a,{id:t.payload._id});return-1!==l&&s.splice(l,1),s;case"INVENTORY_DELETEALL":return[];case"INVENTORY_UPDATE":var r=m.a.cloneDeep(e);return t.payload.map(function(e,t){var a=m.a.findIndex(r,{_id:e._id});r[a].isAvailable=!1}),r}return e},chosenInventory:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INVENTORY_SELECTED":var a=Object.assign({},e);return a._id===t.payload._id?{}:t.payload;case"CLEAR_SELECTION":return{}}return e}}),p=a(4),h=a(5),b=a(8),v=a(6),E=a(7);a(65);var f=function(e){function t(e){return Object(p.a)(this,t),Object(b.a)(this,Object(v.a)(t).call(this,e))}return Object(E.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return s.a.createElement("header",{className:"",id:"overview"},s.a.createElement("div",{className:"container"},s.a.createElement("span",{style:{color:"#fff",fontSize:"42px",fontStyle:"italic"}},"myLogo"),s.a.createElement("h1",null,"Reserve your seat")))}}]),t}(n.Component);a(66);var y=function(e){function t(e){return Object(p.a)(this,t),Object(b.a)(this,Object(v.a)(t).call(this,e))}return Object(E.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(f,null),s.a.createElement("div",{className:"main-container clearfix"},this.props.children))}}]),t}(s.a.Component),g=a(2),k=a(9),N=a.n(k),O={serverHost:"http://3.94.8.20:3000/",inventory:"http://3.94.8.20:3000/inventories",bookInventory:"http://3.94.8.20:3000/inventories",users:"http://3.94.8.20:3000/users",monthOptions:[{value:"January",label:"January"},{value:"February",label:"February"},{value:"March",label:"March"},{value:"April",label:"April"},{value:"May",label:"May"},{value:"June",label:"June"},{value:"July",label:"July"},{value:"August",label:"August"},{value:"September",label:"September"},{value:"October",label:"October"},{value:"November",label:"November"},{value:"December",label:"December"}],genderOptions:[{value:"Female",label:"Female"},{value:"Male",label:"Male"},{value:"Other",label:"Other"}],locationOptions:[{value:"India",label:"India"},{value:"United Kingdom",label:"United Kingdom"},{value:"United States",label:"United States"},{value:"Singapore",label:"Singapore"},{value:"Brazil",label:"Brazil"},{value:"Australia",label:"Australia"}]};a(67);var S=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(b.a)(this,Object(v.a)(t).call(this,e))).createLinksWrapper=a.createLinksWrapper.bind(Object(g.a)(a)),a.logout=a.logout.bind(Object(g.a)(a)),a.state={links:[{label:"Choose seat",route:"chooseSeat"},{label:"Add/Update inventory",route:"inventory"},{label:"Your booked seats",route:"bookedSeats"},{label:"Profile",route:"profile"}]},a}return Object(E.a)(t,e),Object(h.a)(t,[{key:"createLinksWrapper",value:function(e,t){var a=function(){return!!(0===t&!this.props.path)||this.props.path===e.route}.bind(this);return s.a.createElement("li",{key:e.route},s.a.createElement(j,{isSelected:a(),whichRoute:e,makeMeSelected:this.makeMeSelected}))}},{key:"logout",value:function(){N.a.ajax({url:O.users+"/logout",method:"get",success:function(e){e.status&&(window.sessionStorage.setItem("token",null),window.sessionStorage.setItem("userId",null),window.location.href="/login")}})}},{key:"render",value:function(){return s.a.createElement("nav",{className:"main-nav clearfix"},s.a.createElement("ul",null,this.state.links.map(this.createLinksWrapper),s.a.createElement("li",{className:"logout",onClick:this.logout},s.a.createElement("span",null,"Logout"))))}}]),t}(n.Component),j=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(b.a)(this,Object(v.a)(t).call(this,e))).makeMeSelected=a.makeMeSelected.bind(Object(g.a)(a)),a}return Object(E.a)(t,e),Object(h.a)(t,[{key:"makeMeSelected",value:function(e){this.props.makeMeSelected(this.props.whichRoute.route)}},{key:"render",value:function(){var e=this.props.isSelected?"selected":null;return s.a.createElement("span",{className:e},s.a.createElement(o.b,{to:this.props.whichRoute.route},this.props.whichRoute.label))}}]),t}(n.Component),I=function(e){return{type:"SEAT_SELECTED",payload:e}},w=function(e){return{type:"SEAT_REMOVED",payload:e}},D=function(e){return{type:"SEATS_REMOVED",payload:e}},C=function(e){return{type:"INVENTORY_GET",payload:e}},T=function(e){return{type:"INVENTORY_POST",payload:e}},x=function(e){return{type:"INVENTORY_PUT",payload:e}},F=function(e){return{type:"INVENTORY_DELETE",payload:e}},A=function(){return{type:"INVENTORY_DELETEALL"}},P=function(e){return{type:"INVENTORY_SELECTED",payload:e}},_=function(e){return{type:"CLEAR_SELECTION",payload:e}},L=function(e){return{type:"INVENTORY_UPDATE",payload:e}};a(22);var M=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(b.a)(this,Object(v.a)(t).call(this,e))).getSeats=a.getSeats.bind(Object(g.a)(a)),a.getSeats(),a}return Object(E.a)(t,e),Object(h.a)(t,[{key:"createListItems",value:function(){var e=this;return this.props.availableSeats.map(function(t){var a=m.a.find(e.props.chosenSeats,{_id:t._id})?"selected seat":"seat",n="Desktop"===t.type?"fa fa-desktop":null;return!1!==t.isAvailable?s.a.createElement("li",{key:t._id,onClick:function(){return e.props.selectSeats(t)},className:a},s.a.createElement("div",{className:"seatContainer"},s.a.createElement("div",{className:"desktop-image"},s.a.createElement("i",{className:n,"aria-hidden":"true"})),s.a.createElement("div",{className:"meta-info"},s.a.createElement("p",null,"Location: ",s.a.createElement("strong",null,t.location)),s.a.createElement("p",null,"Seat: ",s.a.createElement("strong",null,t.details.desktopDetails.seat))),t.details.desktopDetails.isWebCamAvailable?s.a.createElement("span",{className:"webcam"},s.a.createElement("i",{className:"fa fa-camera","aria-hidden":"true"})):null,t.details.desktopDetails.isHeadPhoneAvailable?s.a.createElement("span",{className:"headphone"},s.a.createElement("i",{className:"fa fa-headphones","aria-hidden":"true"})):null)):null})}},{key:"getSeats",value:function(){var e=this;N.a.ajax({url:O.bookInventory,headers:{"x-access-token":window.sessionStorage.getItem("token")},method:"get",dataType:"JSON",success:function(t){e.props.inventoryGET(t)},error:function(e){401===e.status&&(document.location.href="/login")}})}},{key:"render",value:function(){var e=this.props.chosenSeats.length?"seats contract":"seats expand";return s.a.createElement("div",{className:e},s.a.createElement("ul",null,this.createListItems()))}}]),t}(n.Component);var W=Object(i.b)(function(e){return{availableSeats:e.inventories,chosenSeats:e.chosenSeats}},function(e){return Object(c.a)({selectSeats:I,inventoryGET:C},e)})(M),H=a(15),Y=a.n(H);a(22),a(39);var B=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(b.a)(this,Object(v.a)(t).call(this,e))).handleChangeStartDate=a.handleChangeStartDate.bind(Object(g.a)(a)),a.handleChangeEndDate=a.handleChangeEndDate.bind(Object(g.a)(a)),a.makeBooking=a.makeBooking.bind(Object(g.a)(a)),a.createAcknowledgmentList=a.createAcknowledgmentList.bind(Object(g.a)(a)),a.acknowledgementConfirmed=a.acknowledgementConfirmed.bind(Object(g.a)(a)),a.state={startDate:Y()(),showAcknowledgement:!1},a}return Object(E.a)(t,e),Object(h.a)(t,[{key:"createListItems",value:function(){var e=this;return this.props.chosenSeats.map(function(t){return s.a.createElement("li",{key:t._id},s.a.createElement("span",{className:"removeMe",onClick:function(){return e.props.removeSeats(t)}},s.a.createElement("i",{className:"fa fa-minus-square","aria-hidden":"true"})),s.a.createElement("div",{className:"meta-info"},s.a.createElement("p",null,"Location: ",s.a.createElement("strong",null,t.location)),s.a.createElement("p",null,"Seat: ",s.a.createElement("strong",null,t.details.desktopDetails.seat)),s.a.createElement("p",null,"Type: ",s.a.createElement("strong",null,t.type))))})}},{key:"handleChangeStartDate",value:function(e){this.setState({startDate:e})}},{key:"handleChangeEndDate",value:function(e){this.setState({endDate:e})}},{key:"componentDidMount",value:function(){var e=this;O.userDetails||N.a.ajax({url:O.users+"/"+window.sessionStorage.getItem("userId"),method:"get",headers:{"x-access-token":window.sessionStorage.getItem("token")},success:function(e){O.userDetails=e},error:function(t){401===t.status&&(document.location.href="/login");var a=JSON.parse(t.responseText);e.setState({showError:a.err.message})}})}},{key:"makeBooking",value:function(){for(var e=this,t={bookedFrom:Y()(this.state.startDate,"x").toDate().valueOf(),bookedTill:Y()(this.state.endDate,"x").toDate().valueOf(),bookedOn:Y()().toDate().valueOf(),bookedBy:O.userDetails.firstName+" "+O.userDetails.lastName,bookedByUserId:window.sessionStorage.getItem("userId"),ids:[]},a=0;a<this.props.chosenSeats.length;a++)t.ids.push(this.props.chosenSeats[a]._id);N.a.ajax({url:O.bookInventory,method:"put",headers:{"x-access-token":window.sessionStorage.getItem("token")},contentType:"application/json",data:JSON.stringify(t),dataType:"json",success:function(a){t={},e.setState({showAcknowledgement:!0})}})}},{key:"createAcknowledgmentList",value:function(){return this.props.chosenSeats.map(function(e){return s.a.createElement("li",{key:e._id},s.a.createElement("p",null,"Location: ",s.a.createElement("strong",null,e.location)),s.a.createElement("p",null,"Seat: ",s.a.createElement("strong",null,e.details.desktopDetails.seat)),s.a.createElement("p",null,"Type: ",s.a.createElement("strong",null,e.type)))})}},{key:"acknowledgementConfirmed",value:function(){this.setState({showAcknowledgement:!1}),this.props.updateInventory(this.props.chosenSeats),this.props.removeAllSeats(),this.setState({endDate:null})}},{key:"render",value:function(){var e=this,t=this.props.chosenSeats.length?{opacity:1,height:"99%"}:null,a=this.state.showAcknowledgement?{height:"100%"}:null;return s.a.createElement("div",{className:"seatBucket",style:t},s.a.createElement("h2",null,"Choosen Seats"),s.a.createElement("span",{className:"clear-all",onClick:function(){return e.props.removeAllSeats(e.props.chosenSeats)}},s.a.createElement("i",{className:"fa fa-times","aria-hidden":"true"})," Clear all"),s.a.createElement("ul",null,this.createListItems()),s.a.createElement("div",{className:"dateChooser"},s.a.createElement("span",null,s.a.createElement("strong",null,"From:")),s.a.createElement("span",null,s.a.createElement("strong",null,"To:"))),s.a.createElement("div",{className:"submitRequest"},s.a.createElement("button",{type:"button",disabled:!this.state.startDate||!this.state.endDate,onClick:this.makeBooking},"Submit")),s.a.createElement("div",{className:"acknowledgement",style:a},s.a.createElement("div",{className:"acknowledgeContainer"},this.props.chosenSeats.length>1?s.a.createElement("h4",null,"Your following bookings have been confirmed"):s.a.createElement("h4",null,"Your following booking has been confirmed"),s.a.createElement("ul",null,this.createAcknowledgmentList()),s.a.createElement("div",{className:"submitAcknowledgement"},s.a.createElement("button",{type:"button",onClick:this.acknowledgementConfirmed},"OK")))))}}]),t}(n.Component);var R=Object(i.b)(function(e){return{availableSeats:e.availableSeats,chosenSeats:e.chosenSeats}},function(e){return Object(c.a)({removeSeats:w,removeAllSeats:D,updateInventory:L},e)})(B),U=function(e){function t(e){return Object(p.a)(this,t),Object(b.a)(this,Object(v.a)(t).call(this,e))}return Object(E.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"height100"},s.a.createElement(S,{path:this.props.routes[this.props.routes.length-1].path}),s.a.createElement("div",{className:"container-seat-chooser clearfix"},s.a.createElement(W,null),s.a.createElement(R,null)))}}]),t}(n.Component);a(22);var V=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(b.a)(this,Object(v.a)(t).call(this,e))).getInventory=a.getInventory.bind(Object(g.a)(a)),a.deleteInventory=a.deleteInventory.bind(Object(g.a)(a)),a.getInventory(),a}return Object(E.a)(t,e),Object(h.a)(t,[{key:"getInventory",value:function(){var e=this;N.a.ajax({url:O.inventory,headers:{"x-access-token":window.sessionStorage.getItem("token")},method:"get",dataType:"JSON",success:function(t){e.props.inventoryGET(t)},error:function(e){401===e.status&&(document.location.href="/login")}})}},{key:"deleteInventory",value:function(){var e=this;window.setTimeout(function(){N.a.ajax({url:O.inventory+"/"+e.props.chosenInventory._id,headers:{"x-access-token":window.sessionStorage.getItem("token")},method:"delete",dataType:"JSON",success:function(t){e.props.inventoryGET(t),window.setTimeout(function(){e.props.clearSelectionInventory(e.props.chosenInventory),e.props.selectInventory(e.props.chosenInventory)},200)}})},500)}},{key:"createListItems",value:function(){var e=this;return this.props.inventories.map(function(t){var a=t._id===e.props.chosenInventory._id?"selected seat":"seat",n="Desktop"===t.type?"fa fa-desktop":null;return s.a.createElement("li",{key:t._id,onClick:function(){return e.props.selectInventory(t)},className:a},s.a.createElement("span",{className:"deleteInventory",onClick:e.deleteInventory},s.a.createElement("i",{className:"fa fa-times","aria-hidden":"true"})),s.a.createElement("div",{className:"seatContainer"},s.a.createElement("div",{className:"desktop-image"},s.a.createElement("i",{className:n,"aria-hidden":"true"})),s.a.createElement("div",{className:"meta-info"},s.a.createElement("p",null,"Location: ",s.a.createElement("strong",null,t.location)),s.a.createElement("p",null,"Seat: ",s.a.createElement("strong",null,t.details.desktopDetails.seat)),s.a.createElement("p",null,"Booked by: ",s.a.createElement("strong",null,t.bookedBy&&t.bookedBy.length>0?t.bookedBy:"Not booked"))),t.details.desktopDetails.isWebCamAvailable?s.a.createElement("span",{className:"webcam"},s.a.createElement("i",{className:"fa fa-camera","aria-hidden":"true"})):null,t.details.desktopDetails.isHeadPhoneAvailable?s.a.createElement("span",{className:"headphone"},s.a.createElement("i",{className:"fa fa-headphones","aria-hidden":"true"})):null))})}},{key:"render",value:function(){return s.a.createElement("div",{className:"seats contract"},s.a.createElement("ul",null,this.createListItems()))}}]),t}(n.Component);var J=Object(i.b)(function(e){return{inventories:e.inventories,chosenInventory:e.chosenInventory}},function(e){return Object(c.a)({selectInventory:P,inventoryGET:C,inventoryDELETE:F,clearSelectionInventory:_},e)})(V);a(22);var G=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(b.a)(this,Object(v.a)(t).call(this,e))).updateFields=a.updateFields.bind(Object(g.a)(a)),a.submitForm=a.submitForm.bind(Object(g.a)(a)),a.clearForm=a.clearForm.bind(Object(g.a)(a)),a.doBulkUpload=a.doBulkUpload.bind(Object(g.a)(a)),a.dataObj=["location","type","seat","isWebCamAvailable","isHeadPhoneAvailable"],a}return Object(E.a)(t,e),Object(h.a)(t,[{key:"updateFields",value:function(){if(Object.keys(this.props.chosenInventory).length){for(var e in this.dataObj)if(this.refs[this.dataObj[e]]){var t=this.props.chosenInventory;"seat"!==this.dataObj[e]&&"isWebCamAvailable"!==this.dataObj[e]&&"isHeadPhoneAvailable"!==this.dataObj[e]||(t=this.props.chosenInventory.details.desktopDetails),"checkbox"===this.refs[this.dataObj[e]].type?this.refs[this.dataObj[e]].checked=1==t[this.dataObj[e]]:this.refs[this.dataObj[e]].value=t[this.dataObj[e]]}}else this.clearForm()}},{key:"doBulkUpload",value:function(e){var t=this;e.preventDefault();var a=new FormData;a.append("bulkUploadFile",this.bulkUploadFile),N.a.ajax({url:O.inventory+"/bulkUpload",method:"post",processData:!1,contentType:!1,headers:{"x-access-token":window.sessionStorage.getItem("token")},data:a,success:function(e){t.props.inventoryPOST(e)}})}},{key:"clearForm",value:function(){for(var e in this.dataObj)this.refs[this.dataObj[e]]&&("SELECT"===this.refs[this.dataObj[e]].tagName?this.refs[this.dataObj[e]].value="Please select":"checkbox"===this.refs[this.dataObj[e]].type?this.refs[this.dataObj[e]].checked=!1:this.refs[this.dataObj[e]].value="");Object.keys(this.props.chosenInventory).length&&this.props.clearSelectionInventory(this.props.chosenInventory)}},{key:"submitForm",value:function(){var e=this,t=O.inventory,a="post",n={details:{desktopDetails:{isHeadPhoneAvailable:this.refs.isHeadPhoneAvailable.checked?1:0,isWebCamAvailable:this.refs.isWebCamAvailable.checked?1:0,seat:this.refs.seat.value}},location:this.refs.location.value,type:this.refs.type.value},s=Object.keys(this.props.chosenInventory).length;s&&(t=O.inventory+"/"+this.props.chosenInventory._id,a="put",n._id=this.props.chosenInventory._id),N.a.ajax({url:t,method:a,contentType:"application/json",headers:{"x-access-token":window.sessionStorage.getItem("token")},data:JSON.stringify(n),dataType:"json",success:function(t){s?e.props.inventoryPUT(n):e.props.inventoryPOST(t),n={},e.clearForm()}})}},{key:"render",value:function(){var e=this;return this.updateFields(),s.a.createElement("div",{className:"addEditForm"},s.a.createElement("div",null,s.a.createElement("h2",null,"Add/Edit Inventory"),s.a.createElement("span",{className:"clear-all",onClick:this.clearForm},s.a.createElement("i",{className:"fa fa-times","aria-hidden":"true"})," Clear"),s.a.createElement("ul",null,s.a.createElement("li",null,s.a.createElement("label",{htmlFor:"location"},"Location"),s.a.createElement("select",{id:"location",ref:"location",defaultValue:this.props.chosenInventory.location?this.props.chosenInventory.location:void 0},s.a.createElement("option",null,"Please select"),s.a.createElement("option",null,"Gurgaon Ambience"),s.a.createElement("option",null,"Gurgaon Cyber Greens"),s.a.createElement("option",null,"Noida Green Boulevard"))),s.a.createElement("li",null,s.a.createElement("label",{htmlFor:"isHeadPhoneAvailable"},"Headphone"),s.a.createElement("input",{type:"checkbox",id:"isHeadPhoneAvailable",ref:"isHeadPhoneAvailable",defaultValue:this.props.chosenInventory.details?this.props.chosenInventory.details.desktopDetails.isHeadPhoneAvailable:null})),s.a.createElement("li",null,s.a.createElement("label",{htmlFor:"isWebCamAvailable"},"Webcam"),s.a.createElement("input",{type:"checkbox",id:"isWebCamAvailable",ref:"isWebCamAvailable",defaultValue:this.props.chosenInventory.details?this.props.chosenInventory.details.desktopDetails.isWebCamAvailable:null})),s.a.createElement("li",null,s.a.createElement("label",{htmlFor:"details"},"Seat no."),s.a.createElement("input",{type:"text",id:"seat",ref:"seat",defaultValue:this.props.chosenInventory.details?this.props.chosenInventory.details.desktopDetails.seat:null})),s.a.createElement("li",null,s.a.createElement("label",{htmlFor:"type"},"Type"),s.a.createElement("select",{id:"type",ref:"type",defaultValue:this.props.chosenInventory.type?this.props.chosenInventory.type:void 0},s.a.createElement("option",null,"Please select"),s.a.createElement("option",null,"Desktop")))),s.a.createElement("div",{className:"submitRequest"},s.a.createElement("button",{type:"button",disabled:this.isDisabled,onClick:this.submitForm},"Submit"))),s.a.createElement("div",{className:"bulkUpload"},s.a.createElement("ul",null,s.a.createElement("li",null,s.a.createElement("label",{htmlFor:"bulkUpload"},"Bulk Upload"),s.a.createElement("input",{type:"file",id:"bulkUpload",onChange:function(t){e.bulkUploadFile=t.target.files[0]}}))),s.a.createElement("div",{className:"submitRequest"},s.a.createElement("button",{type:"button",onClick:this.doBulkUpload},"Bulk upload"))))}}]),t}(n.Component);var X=Object(i.b)(function(e){return{chosenInventory:e.chosenInventory}},function(e){return Object(c.a)({inventoryPOST:T,inventoryPUT:x,clearSelectionInventory:_},e)})(G),q=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(b.a)(this,Object(v.a)(t).call(this,e))).deleteAllInventories=a.deleteAllInventories.bind(Object(g.a)(a)),a}return Object(E.a)(t,e),Object(h.a)(t,[{key:"deleteAllInventories",value:function(){var e=this;window.confirm("Are you sure you want to delete all the records?")&&N.a.ajax({url:O.inventory,headers:{"x-access-token":window.sessionStorage.getItem("token")},method:"delete",dataType:"JSON",success:function(t){e.props.inventoryDELETEALL()}})}},{key:"render",value:function(){return s.a.createElement("div",{className:"height100"},s.a.createElement(S,{path:this.props.routes[this.props.routes.length-1].path}),s.a.createElement("div",{className:"deleteAllInventory"},s.a.createElement("button",{type:"button",onClick:this.deleteAllInventories},"Delete all inventories")),s.a.createElement("div",{className:"container-seat-chooser clearfix"},s.a.createElement(J,null),s.a.createElement(X,null)))}}]),t}(n.Component);var z=Object(i.b)(function(e){return{inventories:e.inventories}},function(e){return Object(c.a)({inventoryDELETEALL:A},e)})(q);a(34);var K=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(b.a)(this,Object(v.a)(t).call(this,e))).loginMe=a.loginMe.bind(Object(g.a)(a)),a.state={showError:!1},a}return Object(E.a)(t,e),Object(h.a)(t,[{key:"loginMe",value:function(){var e=this;N.a.ajax({url:O.users+"/login",method:"post",data:{username:this.refs.username.value,password:this.refs.password.value},success:function(t){e.setState({showError:!1}),t.success?(window.sessionStorage.setItem("token",t.token),window.sessionStorage.setItem("userId",t.id),O.userDetails=t.userDetails,o.e.push("/chooseSeat")):e.setState({showError:t.status})},error:function(t){var a=JSON.parse(t.responseText);e.setState({showError:a.err.message})}})}},{key:"render",value:function(){return s.a.createElement("div",{className:"loginBox clearfix"},s.a.createElement("h3",null,"Login"),this.state.showError?s.a.createElement("div",{className:"error"},this.state.showError):null,s.a.createElement("div",{className:"control"},s.a.createElement("label",{htmlFor:"username"},s.a.createElement("input",{className:"input",id:"username",ref:"username",placeholder:"Username",type:"text"}))),s.a.createElement("div",{className:"control"},s.a.createElement("label",{htmlFor:"password"},s.a.createElement("input",{className:"input",id:"password",ref:"password",placeholder:"Password",type:"password"}))),s.a.createElement("div",{className:"control clearfix"},s.a.createElement("button",{type:"submit",onClick:this.loginMe},"Login")),s.a.createElement("div",{className:"register clearfix"},s.a.createElement(o.b,{to:"register"},"Click here to register")))}}]),t}(n.Component),$=a(20);a(34);var Q=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(b.a)(this,Object(v.a)(t).call(this,e))).registerMe=a.registerMe.bind(Object(g.a)(a)),a.myProfilePic=a.myProfilePic.bind(Object(g.a)(a)),a.monthSelect=a.monthSelect.bind(Object(g.a)(a)),a.genderSelect=a.genderSelect.bind(Object(g.a)(a)),a.locationSelect=a.locationSelect.bind(Object(g.a)(a)),a.state={showError:!1},a.form=["firstName","lastName","username","password",{type:"birthMonth"},"birthDay","birthYear",{type:"gender"},"mobile","email",{type:"location"}],a}return Object(E.a)(t,e),Object(h.a)(t,[{key:"myProfilePic",value:function(e){this.myProfilePicFile=e.target.files[0]}},{key:"monthSelect",value:function(e){this.setState({birthMonth:e})}},{key:"genderSelect",value:function(e){this.setState({gender:e})}},{key:"locationSelect",value:function(e){this.setState({location:e})}},{key:"registerMe",value:function(e){var t=this;e.preventDefault();var a=new FormData;a.append("profilePic",this.myProfilePicFile),a.append("admin",this.refs.admin.checked),this.form.map(function(e){"object"===typeof e?a.append(e.type,t.state[e.type].value):a.append(e,t.refs[e].value)}),N.a.ajax({url:O.users+"/register",method:"post",data:a,processData:!1,contentType:!1,success:function(e){"Registration Successful!"===e.status?o.e.push("/login"):alert("some error occured")},error:function(e){var a=JSON.parse(e.responseText);t.setState({showError:a.err.message})}})}},{key:"render",value:function(){return s.a.createElement("div",{className:"loginBox clearfix"},s.a.createElement("h3",null,"Register"),this.state.showError?s.a.createElement("div",{className:"error"},this.state.showError):null,s.a.createElement("form",{onSubmit:this.registerMe},s.a.createElement("div",{className:"control"},s.a.createElement("label",{htmlFor:"firstName"},"Name"),s.a.createElement("div",{className:"wrap-inline"},s.a.createElement("input",{className:"input input-inline",id:"firstName",ref:"firstName",placeholder:"First Name",type:"text"}),s.a.createElement("input",{className:"input input-inline",id:"lastName",ref:"lastName",placeholder:"Last Name",type:"text"}))),s.a.createElement("div",{className:"control"},s.a.createElement("label",{htmlFor:"username"},"Choose your username"),s.a.createElement("input",{className:"input",id:"username",ref:"username",type:"text"})),s.a.createElement("div",{className:"control"},s.a.createElement("label",{htmlFor:"password"},"Password"),s.a.createElement("input",{className:"input",id:"password",ref:"password",type:"password"})),s.a.createElement("div",{className:"control birthday clearfix"},s.a.createElement("label",{htmlFor:"birthday"},"Birthday"),s.a.createElement("div",{className:"wrap-inline clearfix"},s.a.createElement($.a,{name:"birthMonth",value:this.state.birthMonth,options:O.monthOptions,onChange:this.monthSelect,className:"select-inline"}),s.a.createElement("input",{className:"input input-inline",id:"day",ref:"birthDay",placeholder:"Day",type:"text"}),s.a.createElement("input",{className:"input input-inline",id:"year",ref:"birthYear",placeholder:"Year",type:"text"}))),s.a.createElement("div",{className:"control"},s.a.createElement("label",{htmlFor:"gender"},"Gender"),s.a.createElement($.a,{name:"gender",value:this.state.gender,options:O.genderOptions,onChange:this.genderSelect})),s.a.createElement("div",{className:"control"},s.a.createElement("label",{htmlFor:"mobile"},"Mobile"),s.a.createElement("input",{className:"input",id:"mobile",ref:"mobile",placeholder:"+91-9XXXXXXXXX",type:"text"})),s.a.createElement("div",{className:"control"},s.a.createElement("label",{htmlFor:"email"},"Email"),s.a.createElement("input",{className:"input",id:"email",ref:"email",placeholder:"abc@xyz.com",type:"email"})),s.a.createElement("div",{className:"control"},s.a.createElement("label",{htmlFor:"location"},"Location"),s.a.createElement($.a,{name:"location",value:this.state.location,options:O.locationOptions,onChange:this.locationSelect})),s.a.createElement("div",{className:"control"},s.a.createElement("label",{htmlFor:"profilePic"},"Choose your profile pic"),s.a.createElement("input",{type:"file",id:"profilePic",className:"inputClass",onChange:this.myProfilePic})),s.a.createElement("div",{className:"control"},s.a.createElement("label",{htmlFor:"admin"},s.a.createElement("input",{className:"input",id:"admin",ref:"admin",type:"checkbox"})," isAdmin?")),s.a.createElement("p",{className:"control clearfix"},s.a.createElement("button",{type:"submit",onClick:this.registerMe},"Register"))))}}]),t}(n.Component);a(34);var Z=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(b.a)(this,Object(v.a)(t).call(this,e))).monthSelect=a.monthSelect.bind(Object(g.a)(a)),a.locationSelect=a.locationSelect.bind(Object(g.a)(a)),a.updateProfile=a.updateProfile.bind(Object(g.a)(a)),a.myProfilePic=a.myProfilePic.bind(Object(g.a)(a)),a.state={isEdit:!1,showError:!1,userDetails:{}},a.form=[{type:"birthMonth"},"birthDay","birthYear","mobile","email",{type:"location"}],a}return Object(E.a)(t,e),Object(h.a)(t,[{key:"myProfilePic",value:function(e){this.myProfilePicFile=e.target.files[0]}},{key:"monthSelect",value:function(e){this.setState({birthMonth:e.value})}},{key:"locationSelect",value:function(e){this.setState({location:e.value})}},{key:"updateProfile",value:function(e){var t=this;e.preventDefault();var a=new FormData;a.append("profilePic",this.myProfilePicFile),a.append("id",this.state.userDetails._id),this.form.map(function(e){"object"===typeof e?a.append(e.type,t.state[e.type]):a.append(e,t.refs[e].value)}),N.a.ajax({url:O.users+"/"+window.sessionStorage.getItem("userId"),method:"put",data:a,processData:!1,contentType:!1,headers:{"x-access-token":window.sessionStorage.getItem("token")},success:function(e){O.userDetails=e,t.setState({userDetails:e}),t.setState({birthMonth:e.birthMonth}),t.setState({location:e.location}),t.setState({isEdit:!1})},error:function(e){var a=JSON.parse(e.responseText);t.setState({showError:a.err.message})}})}},{key:"componentDidMount",value:function(){var e=this;O.userDetails?(this.setState({userDetails:O.userDetails}),this.setState({birthMonth:O.userDetails.birthMonth}),this.setState({location:O.userDetails.location})):N.a.ajax({url:O.users+"/"+window.sessionStorage.getItem("userId"),method:"get",headers:{"x-access-token":window.sessionStorage.getItem("token")},success:function(t){O.userDetails=t,e.setState({userDetails:t}),e.setState({birthMonth:t.birthMonth}),e.setState({location:t.location})},error:function(t){401===t.status&&(document.location.href="/login");var a=JSON.parse(t.responseText);e.setState({showError:a.err.message})}})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"height100"},s.a.createElement(S,{path:this.props.routes[this.props.routes.length-1].path}),s.a.createElement("div",{className:"loginBox clearfix"},s.a.createElement("h3",null,"Hello, ",this.state.userDetails.firstName," ",this.state.userDetails.lastName),this.state.userDetails.username?s.a.createElement("img",{src:O.serverHost+this.state.userDetails.username+".jpg",alt:this.state.userDetails.firstName,className:"profilePicture"}):null,this.state.showError?s.a.createElement("div",{className:"error"},this.state.showError):null,s.a.createElement("form",{onSubmit:this.updateProfile},s.a.createElement("div",{className:"control"},s.a.createElement("label",null,"Username: "),s.a.createElement("span",null,this.state.userDetails.username)),s.a.createElement("div",{className:"control birthday clearfix"},s.a.createElement("label",{htmlFor:"birthday"},"Birthday"),this.state.isEdit?s.a.createElement("div",{className:"wrap-inline clearfix"},s.a.createElement($.a,{name:"birthMonth",value:this.state.birthMonth,options:O.monthOptions,onChange:this.monthSelect,className:"select-inline"}),s.a.createElement("input",{className:"input input-inline",id:"day",ref:"birthDay",defaultValue:this.state.userDetails.birthDay,type:"text"}),s.a.createElement("input",{className:"input input-inline",id:"year",ref:"birthYear",defaultValue:this.state.userDetails.birthYear,type:"text"})):s.a.createElement("span",null,this.state.userDetails.birthDay,"-",this.state.userDetails.birthMonth,"-",this.state.userDetails.birthYear)),s.a.createElement("div",{className:"control"},s.a.createElement("label",{htmlFor:"gender"},"Gender"),s.a.createElement("span",null,this.state.userDetails.gender)),s.a.createElement("div",{className:"control"},s.a.createElement("label",{htmlFor:"mobile"},"Mobile"),this.state.isEdit?s.a.createElement("input",{className:"input",id:"mobile",ref:"mobile",defaultValue:this.state.userDetails.mobile,type:"text"}):s.a.createElement("span",null,this.state.userDetails.mobile)),s.a.createElement("div",{className:"control"},s.a.createElement("label",{htmlFor:"email"},"Email"),this.state.isEdit?s.a.createElement("input",{className:"input",id:"email",ref:"email",defaultValue:this.state.userDetails.email,type:"email"}):s.a.createElement("span",null,this.state.userDetails.email)),s.a.createElement("div",{className:"control"},s.a.createElement("label",{htmlFor:"location"},"Location"),this.state.isEdit?s.a.createElement($.a,{name:"location",value:this.state.location,options:O.locationOptions,onChange:this.locationSelect}):s.a.createElement("span",null,this.state.userDetails.location)),s.a.createElement("div",{className:"control"},this.state.isEdit?s.a.createElement("div",null,s.a.createElement("label",{htmlFor:"profilePic"},"Choose your profile pic"),s.a.createElement("input",{type:"file",id:"profilePic",className:"inputClass",onChange:this.myProfilePic})):null),s.a.createElement("div",{className:"control"},this.state.isEdit?s.a.createElement("div",null,s.a.createElement("button",{type:"submit",onClick:this.updateProfile},"Update"),s.a.createElement("button",{className:"btnCancel",type:"button",onClick:function(t){t.preventDefault(),e.setState({isEdit:!1})}},"Cancel")):s.a.createElement("button",{type:"button",onClick:function(t){t.preventDefault(),e.setState({isEdit:!0})}},"Edit details")))))}}]),t}(n.Component);a(22);var ee=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(b.a)(this,Object(v.a)(t).call(this,e))).getInventory=a.getInventory.bind(Object(g.a)(a)),a.deleteInventory=a.deleteInventory.bind(Object(g.a)(a)),a.getInventory(),a}return Object(E.a)(t,e),Object(h.a)(t,[{key:"getInventory",value:function(){var e=this;N.a.ajax({url:O.inventory+"/user/"+window.sessionStorage.getItem("userId"),headers:{"x-access-token":window.sessionStorage.getItem("token")},method:"get",dataType:"JSON",success:function(t){e.props.inventoryGET(t)},error:function(e){401===e.status&&(document.location.href="/login")}})}},{key:"deleteInventory",value:function(){var e=this;window.confirm("Are you sure  you want to cancel the booking?")&&window.setTimeout(function(){N.a.ajax({url:O.inventory+"/user/"+window.sessionStorage.getItem("userId")+"/"+e.props.chosenInventory._id,headers:{"x-access-token":window.sessionStorage.getItem("token")},method:"delete",dataType:"JSON",success:function(t){e.props.inventoryGET(t),window.setTimeout(function(){e.props.clearSelectionInventory(e.props.chosenInventory),e.props.selectInventory(e.props.chosenInventory)},200)}})},500)}},{key:"createListItems",value:function(){var e=this,t=function(e){return Y()(e,"x").format("Do MMM YYYY")};return this.props.inventories.map(function(a){var n=a._id===e.props.chosenInventory._id?"selected seat":"seat",l="Desktop"===a.type?"fa fa-desktop":null;return s.a.createElement("li",{key:a._id,onClick:function(){return e.props.selectInventory(a)},className:n},s.a.createElement("span",{className:"deleteInventory",onClick:e.deleteInventory},s.a.createElement("i",{className:"fa fa-times","aria-hidden":"true"})),s.a.createElement("div",{className:"seatContainer"},s.a.createElement("div",{className:"desktop-image"},s.a.createElement("i",{className:l,"aria-hidden":"true"})),s.a.createElement("div",{className:"meta-info"},s.a.createElement("p",null,"Location: ",s.a.createElement("strong",null,a.location)),s.a.createElement("p",null,"Seat: ",s.a.createElement("strong",null,a.details.desktopDetails.seat)),s.a.createElement("p",null,"Booked from: ",s.a.createElement("strong",null,t(a.bookedFrom))),s.a.createElement("p",null,"Booked to: ",s.a.createElement("strong",null,t(a.bookedTill)))),a.details.desktopDetails.isWebCamAvailable?s.a.createElement("span",{className:"webcam"},s.a.createElement("i",{className:"fa fa-camera","aria-hidden":"true"})):null,a.details.desktopDetails.isHeadPhoneAvailable?s.a.createElement("span",{className:"headphone"},s.a.createElement("i",{className:"fa fa-headphones","aria-hidden":"true"})):null))})}},{key:"render",value:function(){var e=Object.keys(this.props.chosenInventory).length?{width:"80%"}:{width:"100%"};return s.a.createElement("div",{className:"seats contract",style:e},s.a.createElement("ul",null,this.createListItems()))}}]),t}(n.Component);var te=Object(i.b)(function(e){return{inventories:e.inventories,chosenInventory:e.chosenInventory}},function(e){return Object(c.a)({selectInventory:P,inventoryGET:C,clearSelectionInventory:_},e)})(ee);a(22),a(39);var ae=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(b.a)(this,Object(v.a)(t).call(this,e))).updateBooking=a.updateBooking.bind(Object(g.a)(a)),a.acknowledgementConfirmed=a.acknowledgementConfirmed.bind(Object(g.a)(a)),a.state={startDate:null,endDate:null,showAcknowledgement:!1},a}return Object(E.a)(t,e),Object(h.a)(t,[{key:"updateBooking",value:function(){var e=this;N.a.ajax({url:O.inventory+"/user/"+window.sessionStorage.getItem("userId")+"/"+this.props.chosenInventory._id,headers:{"x-access-token":window.sessionStorage.getItem("token")},data:{bookedFrom:Y()(this.state.startDate,"x").toDate().valueOf(),bookedTill:Y()(this.state.endDate,"x").toDate().valueOf()},method:"put",dataType:"JSON",success:function(t){e.props.inventoryPUT(t),e.setState({showAcknowledgement:!0})}})}},{key:"componentWillReceiveProps",value:function(e){this.setState({startDate:Y()(e.chosenInventory.bookedFrom),endDate:Y()(e.chosenInventory.bookedTill)})}},{key:"acknowledgementConfirmed",value:function(){this.setState({showAcknowledgement:!1}),this.props.clearSelectionInventory(this.props.chosenInventory)}},{key:"render",value:function(){var e=Object.keys(this.props.chosenInventory).length?{opacity:1,height:"99%"}:null,t=this.state.showAcknowledgement?{height:"100%"}:null,a=function(e){return Y()(e,"x").format("Do MMM YYYY")};return s.a.createElement("div",{className:"seatBucket",style:e},s.a.createElement("h2",null,"Choosen Seats"),Object.keys(this.props.chosenInventory).length?s.a.createElement("ul",null,s.a.createElement("li",null,s.a.createElement("div",{className:"meta-info"},s.a.createElement("p",null,"Location: ",s.a.createElement("strong",null,this.props.chosenInventory.location)),s.a.createElement("p",null,"Type: ",s.a.createElement("strong",null,this.props.chosenInventory.type)),s.a.createElement("p",null,"Seat: ",s.a.createElement("strong",null,this.props.chosenInventory.details.desktopDetails.seat)),s.a.createElement("p",null,"isHeadPhone: ",s.a.createElement("strong",null,this.props.chosenInventory.details.desktopDetails.isHeadPhone?"Yes":"No")),s.a.createElement("p",null,"isWebCamAvailable: ",s.a.createElement("strong",null,this.props.chosenInventory.details.desktopDetails.isWebCamAvailable?"Yes":"No"))))):null,s.a.createElement("div",{className:"dateChooser"},s.a.createElement("span",null,s.a.createElement("strong",null,"From:")),s.a.createElement("span",null,s.a.createElement("strong",null,"To:"))),s.a.createElement("div",{className:"submitRequest"},s.a.createElement("button",{type:"button",disabled:!this.state.startDate||!this.state.endDate,onClick:this.updateBooking},"Submit")),s.a.createElement("div",{className:"acknowledgement",style:t},s.a.createElement("div",{className:"acknowledgeContainer"},s.a.createElement("h4",null,"Your following booking has been updated:"),Object.keys(this.props.chosenInventory).length?s.a.createElement("ul",null,s.a.createElement("li",null,s.a.createElement("p",null,"Location: ",s.a.createElement("strong",null,this.props.chosenInventory.location)),s.a.createElement("p",null,"Type: ",s.a.createElement("strong",null,this.props.chosenInventory.type)),s.a.createElement("p",null,"Seat: ",s.a.createElement("strong",null,this.props.chosenInventory.details.desktopDetails.seat)),s.a.createElement("p",null,"isHeadPhone: ",s.a.createElement("strong",null,this.props.chosenInventory.details.desktopDetails.isHeadPhone?"Yes":"No")),s.a.createElement("p",null,"isWebCamAvailable: ",s.a.createElement("strong",null,this.props.chosenInventory.details.desktopDetails.isWebCamAvailable?"Yes":"No")),s.a.createElement("p",null,"Booked from: ",s.a.createElement("strong",null,a(this.state.startDate))),s.a.createElement("p",null,"Booked to: ",s.a.createElement("strong",null,a(this.state.endDate))))):null,s.a.createElement("div",{className:"submitAcknowledgement"},s.a.createElement("button",{type:"button",onClick:this.acknowledgementConfirmed},"OK")))))}}]),t}(n.Component);var ne=Object(i.b)(function(e){return{chosenInventory:e.chosenInventory}},function(e){return Object(c.a)({inventoryPUT:x,clearSelectionInventory:_},e)})(ae),se=function(e){function t(e){return Object(p.a)(this,t),Object(b.a)(this,Object(v.a)(t).call(this,e))}return Object(E.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"height100"},s.a.createElement(S,{path:this.props.routes[this.props.routes.length-1].path}),s.a.createElement("div",{className:"container-seat-chooser clearfix"},s.a.createElement(te,null),s.a.createElement(ne,null)))}}]),t}(n.Component),le=Object(c.c)(d);r.a.render(s.a.createElement(i.a,{store:le},s.a.createElement(o.d,{history:o.e},s.a.createElement(o.c,{path:"/",component:y},s.a.createElement(o.a,{component:U}),s.a.createElement(o.c,{path:"profile",component:Z}),s.a.createElement(o.c,{path:"register",component:Q}),s.a.createElement(o.c,{path:"bookedSeats",component:se}),s.a.createElement(o.c,{path:"login",component:K}),s.a.createElement(o.c,{path:"chooseSeat",component:U}),s.a.createElement(o.c,{path:"inventory",component:z})))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[47,1,2]]]);
//# sourceMappingURL=main.b0bc06c1.chunk.js.map